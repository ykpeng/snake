{"version":3,"sources":["webpack/bootstrap 0fc4ab3e212391d73ba9","./js/main.js","./js/snake_view.js","./js/board.js","./js/snake.js","./js/coord.js","./js/apple.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;;AAEA;AACA;AACA;AACA,EAAC;;;;;;;ACLD;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;;AAEA,kBAAiB,oBAAoB;AACrC;AACA,oBAAmB,oBAAoB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;;;;;;;ACvEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACbA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAiB,8BAA8B;AAC/C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACtFA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;;;;;ACjBA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 0fc4ab3e212391d73ba9\n **/","const SnakeView = require('./snake_view');\n\n$(()=>{\n  const rootEl = $(\".snake-game\");\n  new SnakeView(rootEl);\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/main.js\n ** module id = 0\n ** module chunks = 0\n **/","const Board = require('./board.js');\n\nconst View = function ($el){\n  this.$el = $el;\n\n  this.board = new Board(20);\n  this.setupGrid();\n\n  this.intervalId = window.setInterval(\n    this.step.bind(this),\n    View.STEP_MILLIS\n  );\n\n  $(window).on(\"keydown\", this.handleKeyEvent.bind(this));\n}\n\nView.KEYS = {\n  38: \"N\",\n  39: \"E\",\n  40: \"S\",\n  37: \"W\"\n};\n\nView.STEP_MILLIS = 100;\n\nView.prototype.handleKeyEvent = function (event) {\n  const dir = View.KEYS[event.keyCode]\n  if (dir) {\n    this.board.snake.turn(dir);\n  }\n};\n\nView.prototype.render = function () {\n  this.updateClasses([this.board.apple.position], \"apple\");\n  this.updateClasses(this.board.snake.segments, \"snake\");\n};\n\nView.prototype.updateClasses = function (coords, className) {\n  this.$li.filter(\".\" + className).removeClass();\n\n  coords.forEach( coord => {\n    const flatCoord = (coord.i * this.board.dim) + coord.j;\n    this.$li.eq(flatCoord).addClass(className);\n  })\n};\n\nView.prototype.setupGrid = function () {\n  let html = \"\";\n\n  for (let i = 0; i < this.board.dim; i++) {\n    html += \"<ul>\";\n    for (let j = 0; j < this.board.dim; j++) {\n      html += \"<li></li>\";\n    }\n    html += \"</ul>\";\n  }\n\n  this.$el.html(html);\n  this.$li = this.$el.find(\"li\");\n};\n\nView.prototype.step = function () {\n  if (this.board.snake.segments.length > 0) {\n    this.board.snake.move();\n    this.render();\n  } else {\n    alert(\"You lose!\");\n    window.clearInterval(this.intervalId);\n  }\n};\n\nmodule.exports = View;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/snake_view.js\n ** module id = 1\n ** module chunks = 0\n **/","const Snake = require('./snake');\nconst Apple = require('./apple');\n\nfunction Board(dim){\n  this.dim = dim;\n  this.snake = new Snake(this);\n  this.apple = new Apple(this);\n}\n\nBoard.prototype.validPosition = function (coord) {\n  return (0 <= coord.i && coord.i < this.dim) && (0 <= coord.j && coord.j < this.dim);\n};\n\nmodule.exports = Board;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/board.js\n ** module id = 2\n ** module chunks = 0\n **/","const Coord = require(\"./coord\");\n\nfunction Snake(board) {\n  this.board = board;\n  this.dir = \"N\";\n  this.turning = false;\n  this.growTurns = 0;\n\n  const midIdx = Math.floor(board.dim / 2);\n  const center = new Coord(midIdx, midIdx);\n  this.segments = [center];\n}\n\nSnake.DIFFS = {\n  \"N\": new Coord(-1, 0),\n  \"S\": new Coord(1, 0),\n  \"E\": new Coord(0, 1),\n  \"W\": new Coord(0, -1)\n}\n\nSnake.GROW_TURNS = 3;\n\nSnake.prototype.head = function () {\n  const idx = this.segments.length - 1;\n  return this.segments[idx];\n};\n\nSnake.prototype.turn = function (dir) {\n  if (Snake.DIFFS[this.dir].isOpposite(Snake.DIFFS[dir]) || this.turning) {\n    return;\n  } else {\n    this.turning = true;\n    this.dir = dir;\n  }\n};\n\nSnake.prototype.eatApple = function () {\n  console.log(this.head());\n  console.log(this.board.apple.position);\n  return this.head().equals(this.board.apple.position);\n};\n\nSnake.prototype.isOccupying = function (array) {\n  this.segments.forEach((segment)=>{\n    if (segment.i === array[0] && segment.j === array[0]) {\n      return true;\n    }\n  })\n  return false;\n};\n\nSnake.prototype.isValid = function () {\n  const head = this.head();\n\n  if (!this.board.validPosition(head)) {\n    return false;\n  }\n\n  for (let i = 0; i < this.segments.length - 1; i++) {\n    if (this.segments[i].equals(head)) {\n      return false;\n    }\n  }\n  return true;\n};\n\nSnake.prototype.move = function () {\n  this.segments.push(this.head().plus(Snake.DIFFS[this.dir]));\n  this.turning = false;\n\n  if (this.eatApple()) {\n    this.growTurns += Snake.GROW_TURNS;\n    this.board.apple.replace();\n  }\n\n  if (this.growTurns > 0) {\n    this.growTurns -= 1;\n  } else {\n    this.segments.shift();\n  }\n\n  if (!this.isValid()) {\n    this.segments = [];\n  }\n};\n\nmodule.exports = Snake;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/snake.js\n ** module id = 3\n ** module chunks = 0\n **/","function Coord (i, j) {\n  this.i = i;\n  this.j = j;\n}\n\nCoord.prototype.plus = function (coord2) {\n  return new Coord(this.i + coord2.i, this.j + coord2.j);\n};\n\nCoord.prototype.equals = function (coord2) {\n  return (this.i === coord2.i) && (this.j === coord2.j);\n};\n\nCoord.prototype.isOpposite = function (coord2) {\n  return (this.i === -1 * coord2.i) && (this.j === -1 * coord2.j);\n};\n\nmodule.exports = Coord;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/coord.js\n ** module id = 4\n ** module chunks = 0\n **/","const Coord = require('./coord');\n\nfunction Apple (board) {\n  this.board = board;\n  this.replace();\n}\n\nApple.prototype.replace = function () {\n  let x = Math.floor(Math.random() * this.board.dim);\n  let y = Math.floor(Math.random() * this.board.dim);\n\n  while (this.board.snake.isOccupying([x, y])) {\n    x = Math.floor(Math.random() * this.board.dim);\n    y = Math.floor(Math.random() * this.board.dim);\n  }\n\n  this.position = new Coord(x, y);\n};\n\nmodule.exports = Apple;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/apple.js\n ** module id = 5\n ** module chunks = 0\n **/"],"sourceRoot":""}